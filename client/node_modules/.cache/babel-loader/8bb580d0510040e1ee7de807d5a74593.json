{"ast":null,"code":"var _jsxFileName = \"D:\\\\Test\\\\test\\\\client\\\\src\\\\components\\\\Signup.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { Link as RouterLink } from 'react-router-dom';\nimport validator from 'validator';\nimport { regexPassword } from '../utils';\nimport { Paper, Container, Link, Stack, Button, Box, Divider, Avatar, Typography, TextField, FilledInput, InputAdornment, IconButton, InputLabel, FormControl, FormHelperText } from '@mui/material';\nimport { Visibility, VisibilityOff } from '@mui/icons-material';\nimport SickIcon from '@mui/icons-material/Sick';\nimport theme from '../styles/theme';\nimport '../styles/App.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction Signup() {\n  _s();\n\n  const [values, setValues] = useState({\n    email: '',\n    password: '',\n    repeatPassword: '',\n    showPassword: false,\n    showRepeatPassword: false\n  });\n  const [errors, setErrors] = useState({\n    email: false,\n    password: false,\n    repeatPassword: false,\n    fetchError: false,\n    fetchErrorMsg: ''\n  });\n\n  const handleChange = fieldName => event => {\n    const currValue = event.target.value;\n\n    switch (fieldName) {\n      case 'email':\n        validator.isEmail(currValue) ? setErrors({ ...errors,\n          email: false\n        }) : setErrors({ ...errors,\n          email: true\n        });\n        break;\n\n      case 'password':\n        regexPassword.test(currValue) ? setErrors({ ...errors,\n          password: false\n        }) : setErrors({ ...errors,\n          password: true\n        });\n        break;\n\n      case 'repeatPassword':\n        currValue === values.password ? setErrors({ ...errors,\n          repeatPassword: false\n        }) : setErrors({ ...errors,\n          repeatPassword: true\n        });\n        break;\n\n      default:\n        break;\n    }\n\n    setValues({ ...values,\n      [fieldName]: event.target.value\n    });\n  };\n\n  const handleShowPassword = showPasswordField => {\n    setValues({ ...values,\n      [showPasswordField]: !values[showPasswordField]\n    });\n  };\n\n  const handleSubmit = async event => {\n    event.preventDefault();\n\n    try {\n      const res = await fetch('/api/register', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          email: values.email,\n          password: values.password\n        })\n      });\n\n      if (!res.ok) {\n        const error = await res.json();\n        return setErrors({ ...errors,\n          fetchError: true,\n          fetchErrorMsg: error.msg\n        });\n      }\n\n      const data = await res.json();\n      setErrors({ ...errors,\n        fetchError: true,\n        fetchErrorMsg: data.msg\n      });\n      setValues({\n        email: '',\n        password: '',\n        repeatPassword: '',\n        showPassword: false,\n        showRepeatPassword: false\n      });\n      return;\n    } catch (error) {\n      setErrors({ ...errors,\n        fetchError: true,\n        fetchErrorMsg: 'There was a problem with our server, please try again later'\n      });\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Container, {\n      sx: {\n        marginTop: '5%'\n      },\n      maxWidth: \"sm\",\n      children: /*#__PURE__*/_jsxDEV(Paper, {\n        elevation: 6,\n        children: [/*#__PURE__*/_jsxDEV(Container, {\n          maxWidth: \"sm\",\n          sx: {\n            display: 'flex',\n            flexDirection: 'column',\n            justifyContent: 'center',\n            alignItems: 'center',\n            paddingTop: '20px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(Avatar, {\n            sx: {\n              width: 80,\n              height: 80,\n              bgcolor: theme.palette.primary.main,\n              boxShadow: '0px 0px 8px rgba(131,153,167,0.99)'\n            },\n            children: /*#__PURE__*/_jsxDEV(SickIcon, {\n              sx: {\n                fontSize: 70\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 148,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Register a new account\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Stack, {\n          component: \"form\",\n          onSubmit: handleSubmit,\n          noValidate: true,\n          spacing: 6,\n          sx: {\n            bgcolor: '#f5f5f6',\n            padding: '40px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(TextField, {\n            variant: \"filled\",\n            type: \"email\",\n            label: \"Email\",\n            value: values.email,\n            onChange: handleChange('email'),\n            error: errors.email,\n            helperText: errors.email && 'Please insert a valid email address'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n            variant: \"filled\",\n            children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n              htmlFor: \"password-field\",\n              children: \"Password\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 169,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(FilledInput, {\n              id: \"password-field\",\n              type: values.showPassword ? 'text' : 'password',\n              value: values.password,\n              onChange: handleChange('password'),\n              error: errors.password,\n              endAdornment: /*#__PURE__*/_jsxDEV(InputAdornment, {\n                position: \"end\",\n                children: /*#__PURE__*/_jsxDEV(IconButton, {\n                  \"aria-label\": \"toggle password visibility\",\n                  onClick: () => handleShowPassword('showPassword'),\n                  edge: \"end\",\n                  children: values.showPassword ? /*#__PURE__*/_jsxDEV(VisibilityOff, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 182,\n                    columnNumber: 46\n                  }, this) : /*#__PURE__*/_jsxDEV(Visibility, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 182,\n                    columnNumber: 66\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 178,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 177,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 170,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(FormHelperText, {\n              error: errors.password,\n              children: \"Password must be at least 8 characters, have one symbol, 1 uppercase letter, 1 lowercase and 1 digit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 188,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n            variant: \"filled\",\n            children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n              htmlFor: \"password-repeat-field\",\n              children: \"Repeat password\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 195,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(FilledInput, {\n              id: \"password-repeat-field\",\n              type: values.showRepeatPassword ? 'text' : 'password',\n              value: values.repeatPassword,\n              onChange: handleChange('repeatPassword'),\n              endAdornment: /*#__PURE__*/_jsxDEV(InputAdornment, {\n                position: \"end\",\n                children: /*#__PURE__*/_jsxDEV(IconButton, {\n                  \"aria-label\": \"toggle password visibility\",\n                  onClick: () => handleShowPassword('showRepeatPassword'),\n                  edge: \"end\",\n                  children: values.showRepeatPassword ? /*#__PURE__*/_jsxDEV(VisibilityOff, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 210,\n                    columnNumber: 25\n                  }, this) : /*#__PURE__*/_jsxDEV(Visibility, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 212,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 205,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 204,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 198,\n              columnNumber: 15\n            }, this), errors.repeatPassword && /*#__PURE__*/_jsxDEV(FormHelperText, {\n              error: errors.repeatPassword,\n              children: \"Password must be the same as above\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 219,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              display: 'flex',\n              justifyContent: 'center'\n            },\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"contained\",\n              size: \"large\",\n              type: \"submit\",\n              sx: {\n                minWidth: '70%'\n              },\n              children: \"Sign me up!\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 229,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 224,\n            columnNumber: 13\n          }, this), errors.fetchError && /*#__PURE__*/_jsxDEV(FormHelperText, {\n            error: true,\n            children: errors.fetchErrorMsg\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 240,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Divider, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 242,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            paragraph: true,\n            align: \"center\",\n            children: [\"Already have an account?\", ' ', /*#__PURE__*/_jsxDEV(Link, {\n              component: RouterLink,\n              to: \"/\",\n              children: \"Login here\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 245,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 243,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n}\n\n_s(Signup, \"HqxICHJBpq/yK9eSKugULevNh6c=\");\n\n_c = Signup;\nexport default Signup;\n\nvar _c;\n\n$RefreshReg$(_c, \"Signup\");","map":{"version":3,"sources":["D:/Test/test/client/src/components/Signup.js"],"names":["React","useState","Link","RouterLink","validator","regexPassword","Paper","Container","Stack","Button","Box","Divider","Avatar","Typography","TextField","FilledInput","InputAdornment","IconButton","InputLabel","FormControl","FormHelperText","Visibility","VisibilityOff","SickIcon","theme","Signup","values","setValues","email","password","repeatPassword","showPassword","showRepeatPassword","errors","setErrors","fetchError","fetchErrorMsg","handleChange","fieldName","event","currValue","target","value","isEmail","test","handleShowPassword","showPasswordField","handleSubmit","preventDefault","res","fetch","method","headers","body","JSON","stringify","ok","error","json","msg","data","marginTop","display","flexDirection","justifyContent","alignItems","paddingTop","width","height","bgcolor","palette","primary","main","boxShadow","fontSize","padding","minWidth"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\nimport { Link as RouterLink } from 'react-router-dom'\nimport validator from 'validator'\nimport { regexPassword } from '../utils'\nimport {\n  Paper,\n  Container,\n  Link,\n  Stack,\n  Button,\n  Box,\n  Divider,\n  Avatar,\n  Typography,\n  TextField,\n  FilledInput,\n  InputAdornment,\n  IconButton,\n  InputLabel,\n  FormControl,\n  FormHelperText,\n} from '@mui/material'\nimport {\n  Visibility,\n  VisibilityOff,\n} from '@mui/icons-material'\nimport SickIcon from '@mui/icons-material/Sick';\nimport theme from '../styles/theme'\nimport '../styles/App.css'\n\nfunction Signup() {\n  const [values, setValues] = useState({\n    email: '',\n    password: '',\n    repeatPassword: '',\n    showPassword: false,\n    showRepeatPassword: false,\n  })\n  const [errors, setErrors] = useState({\n    email: false,\n    password: false,\n    repeatPassword: false,\n    fetchError: false,\n    fetchErrorMsg: '',\n  })\n\n  const handleChange = (fieldName) => (event) => {\n    const currValue = event.target.value\n    switch (fieldName) {\n      case 'email':\n        validator.isEmail(currValue)\n          ? setErrors({ ...errors, email: false })\n          : setErrors({ ...errors, email: true })\n        break\n\n      case 'password':\n        regexPassword.test(currValue)\n          ? setErrors({ ...errors, password: false })\n          : setErrors({ ...errors, password: true })\n        break\n\n      case 'repeatPassword':\n        currValue === values.password\n          ? setErrors({ ...errors, repeatPassword: false })\n          : setErrors({ ...errors, repeatPassword: true })\n        break\n      default:\n        break;\n    }\n    setValues({ ...values, [fieldName]: event.target.value })\n  }\n\n  const handleShowPassword = (showPasswordField) => {\n    setValues({\n      ...values,\n      [showPasswordField]: !values[showPasswordField],\n    })\n  }\n\n  const handleSubmit = async (event) => {\n    event.preventDefault()\n\n    try {\n      const res = await fetch('/api/register', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          email: values.email,\n          password: values.password,\n        }),\n      })\n\n      if (!res.ok) {\n        const error = await res.json()\n        return setErrors({\n          ...errors,\n          fetchError: true,\n          fetchErrorMsg: error.msg,\n        })\n      }\n\n      const data = await res.json()\n      setErrors({\n        ...errors,\n        fetchError: true,\n        fetchErrorMsg: data.msg,\n      })\n      setValues({\n        email: '',\n        password: '',\n        repeatPassword: '',\n        showPassword: false,\n        showRepeatPassword: false,\n      })\n      return\n    } catch (error) {\n      setErrors({\n        ...errors,\n        fetchError: true,\n        fetchErrorMsg:\n          'There was a problem with our server, please try again later',\n      })\n    }\n  }\n\n  return (\n    <>\n      <Container sx={{ marginTop: '5%' }} maxWidth='sm'>\n        <Paper elevation={6}>\n          <Container\n            maxWidth='sm'\n            sx={{\n              display: 'flex',\n              flexDirection: 'column',\n              justifyContent: 'center',\n              alignItems: 'center',\n              paddingTop: '20px',\n            }}>\n            <Avatar\n              sx={{\n                width: 80,\n                height: 80,\n                bgcolor: theme.palette.primary.main,\n                boxShadow: '0px 0px 8px rgba(131,153,167,0.99)',\n              }}>\n              <SickIcon sx={{ fontSize: 70 }} />\n            </Avatar>\n            <h2>Register a new account</h2>\n          </Container>\n          <Stack\n            component='form'\n            onSubmit={handleSubmit}\n            noValidate\n            spacing={6}\n            sx={{ bgcolor: '#f5f5f6', padding: '40px' }}>\n            <TextField\n              variant='filled'\n              type='email'\n              label='Email'\n              value={values.email}\n              onChange={handleChange('email')}\n              error={errors.email}\n              helperText={errors.email && 'Please insert a valid email address'}\n            />\n\n            <FormControl variant='filled'>\n              <InputLabel htmlFor='password-field'>Password</InputLabel>\n              <FilledInput\n                id='password-field'\n                type={values.showPassword ? 'text' : 'password'}\n                value={values.password}\n                onChange={handleChange('password')}\n                error={errors.password}\n                endAdornment={\n                  <InputAdornment position='end'>\n                    <IconButton\n                      aria-label='toggle password visibility'\n                      onClick={() => handleShowPassword('showPassword')}\n                      edge='end'>\n                      {values.showPassword ? <VisibilityOff /> : <Visibility />}\n                    </IconButton>\n                  </InputAdornment>\n                }\n              />\n\n              <FormHelperText error={errors.password}>\n                Password must be at least 8 characters, have one symbol, 1\n                uppercase letter, 1 lowercase and 1 digit\n              </FormHelperText>\n            </FormControl>\n\n            <FormControl variant='filled'>\n              <InputLabel htmlFor='password-repeat-field'>\n                Repeat password\n              </InputLabel>\n              <FilledInput\n                id='password-repeat-field'\n                type={values.showRepeatPassword ? 'text' : 'password'}\n                value={values.repeatPassword}\n                onChange={handleChange('repeatPassword')}\n                endAdornment={\n                  <InputAdornment position='end'>\n                    <IconButton\n                      aria-label='toggle password visibility'\n                      onClick={() => handleShowPassword('showRepeatPassword')}\n                      edge='end'>\n                      {values.showRepeatPassword ? (\n                        <VisibilityOff />\n                      ) : (\n                        <Visibility />\n                      )}\n                    </IconButton>\n                  </InputAdornment>\n                }\n              />\n              {errors.repeatPassword && (\n                <FormHelperText error={errors.repeatPassword}>\n                  Password must be the same as above\n                </FormHelperText>\n              )}\n            </FormControl>\n            <Box\n              sx={{\n                display: 'flex',\n                justifyContent: 'center',\n              }}>\n              <Button\n                variant='contained'\n                size='large'\n                type='submit'\n                sx={{\n                  minWidth: '70%',\n                }}>\n                Sign me up!\n              </Button>\n            </Box>\n            {errors.fetchError && (\n              <FormHelperText error>{errors.fetchErrorMsg}</FormHelperText>\n            )}\n            <Divider />\n            <Typography paragraph align='center'>\n              Already have an account?{' '}\n              <Link component={RouterLink} to='/'>\n                Login here\n              </Link>\n            </Typography>\n          </Stack>\n        </Paper>\n      </Container>\n    </>\n  )\n}\n\nexport default Signup\n"]},"metadata":{},"sourceType":"module"}